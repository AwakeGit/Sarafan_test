# Магазин продуктов API

Этот проект представляет собой API для управления продуктами, категориями,
подкатегориями и корзиной в магазине продуктов. Реализованы функции добавления,
изменения и удаления товаров, а также работа с корзиной для пользователей.

## Функциональные возможности

- Создание, редактирование и удаление категорий и подкатегорий товаров в
  админке.
- Категории и подкатегории имеют наименование, slug и изображение.
- Подкатегории связаны с родительской категорией.
- Эндпоинт для просмотра всех категорий с подкатегориями с пагинацией.
- Добавление, редактирование и удаление продуктов в админке.
- Продукты относятся к подкатегории, имеют три размера изображений и цену.
- Эндпоинты для добавления, изменения (количества), удаления продуктов в
  корзине.
- Эндпоинт для вывода содержимого корзины с подсчетом количества товаров и
  общей стоимости.
- Эндпоинт для полной очистки корзины.
- Авторизация по JWT токенам.
- Подключена Swagger-документация.

## Установка и запуск

### Шаги по установке:

1. **Клонируйте репозиторий:**

    ```bash
    git clone <ссылка на репозиторий>
    cd <имя директории>
    ```

2. **Создайте и активируйте виртуальное окружение:**

    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Windows: venv\Scripts\activate
    ```

3. **Установите зависимости:**

    ```bash
    pip install -r requirements.txt
    ```

4. **Создайте файл `.env`:**

   В корневом каталоге проекта создайте файл `.env` и добавьте в него следующие
   настройки:

    ```ini
    SECRET_KEY=your-secret-key-here
    DEBUG=True
    ```

5. **Примените миграции:**

    ```bash
    python manage.py migrate
    ```

6. **Создайте суперпользователя (администратора):**

    ```bash
    python manage.py createsuperuser
    ```

7. **Запустите сервер разработки:**

    ```bash
    python manage.py runserver
    ```

8. **Посетите админку:**
   Откройте браузер и перейдите по адресу `http://127.0.0.1:8000/admin/`, чтобы
   зайти в панель администратора.

## API Документация

Swagger-документация доступна по адресу:

   ```bash
    http://127.0.0.1:8000/swagger
   ```

## Использование API

### Категории и подкатегории

- **GET /api/categories/** - Получение списка категорий с подкатегориями (с пагинацией).
- **GET /api/products/** - Получение списка продуктов с пагинацией.

### Работа с корзиной (только для аутентифицированных пользователей)

- **POST /api/cart/add/** - Добавление продукта в корзину.
- **PATCH /api/cart/update/<int:pk>/** - Обновление количества продукта в корзине.
- **DELETE /api/cart/delete/<int:pk>/** - Удаление продукта из корзины.
- **GET /api/cart/summary/** - Получение содержимого корзины и подсчета товаров и стоимости.
- **DELETE /api/cart/clear/** - Очистка корзины.

### Авторизация

Для получения JWT токенов используйте следующие эндпоинты:

- **POST /api/token/** - Получение токена (username и password в теле запроса).
- **POST /api/token/refresh/** - Обновление токена.

## Тестирование

Для запуска тестов выполните:

```bash
pytest products/tests
```
